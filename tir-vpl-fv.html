<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>TIR, VPL e Montante (FV) | SimulaLucro</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Calcule TIR, VPL e Montante (FV) a partir de fluxos de caixa por per√≠odo. Simulador financeiro gratuito.">
<link rel="canonical" href="https://simulalucro.com.br/tir-vpl-fv.html">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f3f6fb;
  color:#1f2937;
  padding-bottom:90px;
}
a{text-decoration:none;color:#2563eb}

/* HEADER */
.header{
  position:sticky;
  top:0;
  background:#fff;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  z-index:1000;
}
.header-inner{
  max-width:1100px;
  margin:auto;
  padding:14px 16px;
}
.menu{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
  font-size:14px;
}
.menu a{font-weight:500}
.menu a.active{font-weight:700;text-decoration:underline}

/* CONTAINER */
.container{
  max-width:1100px;
  margin:auto;
  padding:24px 16px;
}

/* CARD */
.card{
  background:#fff;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

/* FLUXO DE CAIXA */
.flow-header,
.flow-row{
  display:grid;
  grid-template-columns:90px 1fr 70px 32px;
  gap:6px;
  align-items:center;
}

.flow-header{
  font-size:12px;
  font-weight:700;
  margin-bottom:6px;
}

.flow-row{
  margin-bottom:6px;
}

.flow-row input,
.flow-row select{
  padding:8px;
  font-size:13px;
  border-radius:8px;
  border:1px solid #d1d5db;
  height:36px;
}

.flow-row select{
  padding:6px;
}

.flow-row button{
  background:#ef4444;
  color:#fff;
  border:none;
  border-radius:8px;
  height:36px;
  cursor:pointer;
}

/* BOT√ïES */
.btn{
  margin-top:12px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:#fff;
  font-weight:700;
  cursor:pointer;
  width:100%;
}
.btn.secondary{background:#374151}

/* RESULTADO */
.result{
  margin-top:24px;
  padding:20px;
  background:#ecfeff;
  border-radius:12px;
}

/* GR√ÅFICO */
.chart-box{
  margin-top:32px;
}
</style>
</head>

<body>

<header class="header">
  <div class="header-inner">
    <div class="menu">
      <a href="index.html">In√≠cio</a>
      <a href="lucro-airbnb.html">Airbnb</a>
      <a href="comparativo.html">Comparativo</a>
      <a href="ponto-equilibrio.html">Equil√≠brio</a>
      <a href="margem-lucro.html">Margem</a>
      <a href="preco-servico.html">Servi√ßo</a>
      <a href="juros-compostos.html">Juros</a>
      <a href="tir-vpl-fv.html" class="active">TIR / VPL</a>
    </div>
  </div>
</header>

<main class="container">

<div class="card">
  <h1>üìä TIR, VPL e Montante (FV)</h1>
  <p>Calcule a viabilidade de investimentos a partir de fluxos de caixa por per√≠odo.</p>

  <h3>Fluxo de Caixa</h3>

  <div class="flow-header">
    <span>Per√≠odo</span>
    <span>Valor (R$)</span>
    <span>Tipo</span>
    <span></span>
  </div>

  <div id="flows"></div>

  <button class="btn secondary" onclick="addFluxo()">‚ûï Adicionar linha</button>

  <h3 style="margin-top:24px">Taxa de desconto</h3>
  <input id="taxa" type="number" placeholder="Ex: 1">
  <select id="tipoTaxa">
    <option value="percent">Percentual (%)</option>
    <option value="decimal">Decimal</option>
  </select>

  <button class="btn" onclick="calcular()">Calcular</button>

  <div id="resultado" class="result" style="display:none"></div>

  <div class="chart-box">
    <canvas id="grafico"></canvas>
  </div>
</div>

</main>

<script>
let fluxos=[];
let chart;

function addFluxo(){
  fluxos.push({periodo:fluxos.length,valor:0,tipo:"saida"});
  render();
}

function removeFluxo(i){
  fluxos.splice(i,1);
  render();
}

function render(){
  let html="";
  fluxos.forEach((f,i)=>{
    html+=`
      <div class="flow-row">
        <input type="number" value="${f.periodo}" onchange="fluxos[${i}].periodo=this.value">
        <input type="number" value="${f.valor}" onchange="fluxos[${i}].valor=this.value">
        <select onchange="fluxos[${i}].tipo=this.value">
          <option value="saida" ${f.tipo==="saida"?"selected":""}>Sa√≠da</option>
          <option value="entrada" ${f.tipo==="entrada"?"selected":""}>Entrada</option>
        </select>
        <button onclick="removeFluxo(${i})">‚úñ</button>
      </div>
    `;
  });
  document.getElementById("flows").innerHTML=html;
}

function calcular(){
  let taxa=Number(document.getElementById("taxa").value);
  if(document.getElementById("tipoTaxa").value==="percent") taxa/=100;

  if(fluxos.length<2){alert("Informe ao menos dois per√≠odos.");return;}

  let vpl=0;
  let maxP=Math.max(...fluxos.map(f=>Number(f.periodo)));
  let labels=[];
  let valores=[];

  fluxos.forEach(f=>{
    let v=(f.tipo==="entrada"?1:-1)*Number(f.valor);
    let p=Number(f.periodo);
    vpl+=v/Math.pow(1+taxa,p);
    labels.push("P"+p);
    valores.push(v);
  });

  let fv=0;
  fluxos.forEach(f=>{
    let v=(f.tipo==="entrada"?1:-1)*Number(f.valor);
    let p=Number(f.periodo);
    fv+=v*Math.pow(1+taxa,(maxP-p));
  });

  document.getElementById("resultado").style.display="block";
  document.getElementById("resultado").innerHTML=`
    üìâ <strong>VPL:</strong> R$ ${vpl.toFixed(2)}<br>
    üí∞ <strong>Montante (FV):</strong> R$ ${fv.toFixed(2)}
  `;

  if(chart) chart.destroy();
  chart=new Chart(document.getElementById("grafico"),{
    type:"bar",
    data:{
      labels,
      datasets:[{
        label:"Fluxo de Caixa",
        data:valores,
        backgroundColor:valores.map(v=>v>=0?"#22c55e":"#ef4444")
      }]
    }
  });
}

addFluxo();
</script>

</body>
</html>
