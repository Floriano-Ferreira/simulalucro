<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>TIR, VPL e Montante (FV) | SimulaLucro</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Calcule TIR, VPL e Montante (FV) a partir de fluxos de caixa por data. Simulador financeiro gratuito.">
<link rel="canonical" href="https://simulalucro.com.br/tir-vpl-fv.html">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f3f6fb;
  color:#1f2937;
  padding-bottom:90px;
}
a{text-decoration:none;color:#2563eb}

/* HEADER */
.header{
  position:sticky;
  top:0;
  background:#fff;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  z-index:1000;
}
.header-inner{
  max-width:1100px;
  margin:auto;
  padding:14px 16px;
}
.menu{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
  font-size:14px;
}
.menu a{font-weight:500}
.menu a.active{font-weight:700;text-decoration:underline}

/* CONTAINER */
.container{
  max-width:1100px;
  margin:auto;
  padding:24px 16px;
}

/* CARD */
.card{
  background:#fff;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

/* FLUXO */
.flow-header{
  display:grid;
  grid-template-columns:110px 1fr 90px 36px;
  gap:8px;
  font-size:13px;
  font-weight:700;
  margin-bottom:8px;
}

.flow-row{
  display:grid;
  grid-template-columns:110px 1fr 90px 36px;
  gap:8px;
  margin-bottom:8px;
}

.flow-row input,
.flow-row select{
  padding:10px;
  border-radius:8px;
  border:1px solid #d1d5db;
  width:100%;
}

.flow-row button{
  background:#ef4444;
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

/* MOBILE AJUSTE */
@media(max-width:768px){
  .flow-header{
    display:none;
  }

  .flow-row{
    grid-template-columns:1fr 1fr;
    grid-template-areas:
      "data tipo"
      "valor valor"
      "remove remove";
  }

  .flow-row input[type="date"]{
    grid-area:data;
  }

  .flow-row select{
    grid-area:tipo;
  }

  .flow-row input[type="number"]{
    grid-area:valor;
  }

  .flow-row button{
    grid-area:remove;
    width:100%;
  }
}

/* BUTTONS */
.btn{
  margin-top:12px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:#fff;
  font-weight:700;
  cursor:pointer;
  width:100%;
}
.btn.secondary{background:#374151}

/* RESULT */
.result{
  margin-top:24px;
  padding:20px;
  background:#ecfeff;
  border-radius:12px;
}

/* CHART */
.chart-box{
  margin-top:32px;
}
</style>
</head>

<body>

<header class="header">
  <div class="header-inner">
    <div class="menu">
      <a href="index.html">InÃ­cio</a>
      <a href="lucro-airbnb.html">Airbnb</a>
      <a href="comparativo.html">Comparativo</a>
      <a href="ponto-equilibrio.html">EquilÃ­brio</a>
      <a href="margem-lucro.html">Margem</a>
      <a href="preco-servico.html">ServiÃ§o</a>
      <a href="juros-compostos.html">Juros</a>
      <a href="tir-vpl-fv.html" class="active">TIR / VPL</a>
    </div>
  </div>
</header>

<main class="container">

<div class="card">
  <h1>ðŸ“Š TIR, VPL e Montante (FV)</h1>
  <p>Calcule a viabilidade de investimentos com base em fluxos de caixa por data.</p>

  <h3>Fluxo de Caixa</h3>

  <div class="flow-header">
    <span>Data</span>
    <span>Valor (R$)</span>
    <span>Tipo</span>
    <span></span>
  </div>

  <div id="flows"></div>

  <button class="btn secondary" onclick="addFluxo()">âž• Adicionar linha</button>

  <h3 style="margin-top:24px">Taxa de desconto</h3>
  <input id="taxa" type="number" placeholder="Ex: 1">
  <select id="tipoTaxa">
    <option value="percent">Percentual (%)</option>
    <option value="decimal">Decimal</option>
  </select>

  <button class="btn" onclick="calcular()">Calcular</button>

  <div id="resultado" class="result" style="display:none"></div>

  <div class="chart-box">
    <canvas id="grafico"></canvas>
  </div>
</div>

</main>

<script>
let fluxos=[];
let chart;

function addFluxo(){
  fluxos.push({data:"",valor:0,tipo:"saida"});
  render();
}

function removeFluxo(i){
  fluxos.splice(i,1);
  render();
}

function render(){
  let html="";
  fluxos.forEach((f,i)=>{
    html+=`
      <div class="flow-row">
        <input type="date" onchange="fluxos[${i}].data=this.value">
        <input type="number" onchange="fluxos[${i}].valor=this.value">
        <select onchange="fluxos[${i}].tipo=this.value">
          <option value="saida">SaÃ­da</option>
          <option value="entrada">Entrada</option>
        </select>
        <button onclick="removeFluxo(${i})">âœ–</button>
      </div>
    `;
  });
  document.getElementById("flows").innerHTML=html;
}

function calcular(){
  let taxa=Number(document.getElementById("taxa").value);
  if(document.getElementById("tipoTaxa").value==="percent") taxa/=100;

  let dados=fluxos.filter(f=>f.data && f.valor!=0);
  if(dados.length<2){alert("Informe pelo menos dois fluxos.");return;}

  dados.sort((a,b)=>new Date(a.data)-new Date(b.data));
  let base=new Date(dados[0].data);

  let labels=[];
  let valores=[];
  let vpl=0;
  let maxMes=0;

  dados.forEach(f=>{
    let d=new Date(f.data);
    let meses=(d.getFullYear()-base.getFullYear())*12+(d.getMonth()-base.getMonth());
    let v=(f.tipo==="entrada"?1:-1)*Number(f.valor);
    labels.push(f.data);
    valores.push(v);
    vpl+=v/Math.pow(1+taxa,meses);
    maxMes=Math.max(maxMes,meses);
  });

  let fv=0;
  dados.forEach(f=>{
    let d=new Date(f.data);
    let meses=(d.getFullYear()-base.getFullYear())*12+(d.getMonth()-base.getMonth());
    let v=(f.tipo==="entrada"?1:-1)*Number(f.valor);
    fv+=v*Math.pow(1+taxa,(maxMes-meses));
  });

  document.getElementById("resultado").style.display="block";
  document.getElementById("resultado").innerHTML=`
    ðŸ“‰ <strong>VPL:</strong> R$ ${vpl.toFixed(2)}<br>
    ðŸ’° <strong>Montante (FV):</strong> R$ ${fv.toFixed(2)}
  `;

  if(chart) chart.destroy();
  chart=new Chart(document.getElementById("grafico"),{
    type:"bar",
    data:{
      labels,
      datasets:[{
        label:"Fluxo de Caixa",
        data:valores,
        backgroundColor:valores.map(v=>v>=0?"#22c55e":"#ef4444")
      }]
    }
  });
}

addFluxo();
</script>

</body>
</html>
